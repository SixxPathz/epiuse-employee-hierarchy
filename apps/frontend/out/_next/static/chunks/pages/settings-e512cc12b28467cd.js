(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{2837:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(4919)}])},4919:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var r=t(5893),a=t(7294),n=t(9008),l=t.n(n),i=t(1163),c=t(2637),d=t(8029),o=t(6501);let m=a.forwardRef(function(e,s){let{title:t,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},n),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}),x=a.forwardRef(function(e,s){let{title:t,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},n),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}),h=a.forwardRef(function(e,s){let{title:t,titleId:r,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},n),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var u=t(2044),p=t(8999),y=t(2121);function j(e){let{user:s}=e,[t,n]=(0,a.useState)(null),l=(0,y.$)(s.role),i=(e,s)=>{let t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},c=(0,d.D)({mutationFn:async()=>await p.Z.get("/export/employees/csv",{responseType:"blob"}),onSuccess:e=>{var s,t;let r=(null===(t=e.headers["content-disposition"])||void 0===t?void 0:null===(s=t.match(/filename="(.+)"/))||void 0===s?void 0:s[1])||"employees_export.csv";i(e.data,r),o.ZP.success("Employee data exported successfully!")},onError:e=>{var s,t;o.ZP.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Failed to export employee data")},onSettled:()=>{n(null)}}),j=(0,d.D)({mutationFn:async()=>await p.Z.get("/export/hierarchy/json",{responseType:"blob"}),onSuccess:e=>{var s,t;let r=(null===(t=e.headers["content-disposition"])||void 0===t?void 0:null===(s=t.match(/filename="(.+)"/))||void 0===s?void 0:s[1])||"organization_hierarchy.json";i(e.data,r),o.ZP.success("Organization hierarchy exported successfully!")},onError:e=>{var s,t;o.ZP.error((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Failed to export hierarchy data")},onSettled:()=>{n(null)}}),g=e=>{switch(n(e),e){case"employees":c.mutate();break;case"hierarchy":j.mutate()}};return l.canViewEmployees?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body text-center",children:[(0,r.jsx)(x,{className:"mx-auto h-12 w-12 text-blue-600 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Employee Data"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Export complete employee database including personal information, positions, and hierarchy relationships."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Format: CSV"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Includes: All employee fields, manager relationships"})]}),(0,r.jsx)("button",{onClick:()=>g("employees"),disabled:"employees"===t,className:"mt-4 btn-primary w-full disabled:opacity-50",children:"employees"===t?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:"Exporting..."})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)(h,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Export CSV"})]})})]})}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body text-center",children:[(0,r.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-green-600 mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Organization Hierarchy"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Export the complete organizational structure as a hierarchical tree with all reporting relationships."}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Format: JSON"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Includes: Nested hierarchy, all relationships"})]}),(0,r.jsx)("button",{onClick:()=>g("hierarchy"),disabled:"hierarchy"===t,className:"mt-4 btn-primary w-full disabled:opacity-50",children:"hierarchy"===t?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,r.jsx)("span",{children:"Exporting..."})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)(h,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Export JSON"})]})})]})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Export Information"})}),(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Data Formats"}),(0,r.jsxs)("ul",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"CSV:"})," Compatible with Excel, Google Sheets, and other spreadsheet applications"]}),(0,r.jsxs)("li",{children:["• ",(0,r.jsx)("strong",{children:"JSON:"})," Structured data format suitable for technical analysis and system integration"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Data Security"}),(0,r.jsxs)("ul",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• All exports respect role-based permissions"}),(0,r.jsx)("li",{children:"• Manager exports include only subordinate employee data"}),(0,r.jsx)("li",{children:"• Exported files contain timestamp and user information"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:"Best Practices"}),(0,r.jsxs)("ul",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Store exported files securely"}),(0,r.jsx)("li",{children:"• Use appropriate filters for large employee exports"}),(0,r.jsx)("li",{children:"• Verify data integrity after export"})]})]})]})})]})]}):(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body text-center",children:[(0,r.jsx)(m,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Restricted"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to export data."})]})})}var g=t(3252);function v(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(!0),[d,o]=(0,a.useState)("general"),m=(0,i.useRouter)();return((0,a.useEffect)(()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("user");if(!e||!t){m.push("/auth/login");return}try{let e=JSON.parse(t);s(e)}catch(e){console.error("Error parsing user data:",e),m.push("/auth/login")}finally{n(!1)}},[m]),(0,a.useEffect)(()=>{let e=e=>{s(e.detail)};return window.addEventListener("userProfileUpdated",e),()=>{window.removeEventListener("userProfileUpdated",e)}},[]),t)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-company-navy"})}):e?"ADMIN"!==e.role?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Settings - EPI-USE Nexus"}),(0,r.jsx)("meta",{name:"description",content:"Configure your system settings"})]}),(0,r.jsx)(c.Z,{user:e,children:(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Access Restricted"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Only administrators can access system settings."})]})})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Settings - EPI-USE Nexus"}),(0,r.jsx)("meta",{name:"description",content:"Configure your system settings"})]}),(0,r.jsx)(c.Z,{user:e,children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Configure your organization's system preferences."})]}),(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,r.jsxs)("button",{onClick:()=>o("general"),className:"group inline-flex items-center py-2 px-1 border-b-2 font-medium text-sm ".concat("general"===d?"border-company-navy text-company-navy":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)(g.Z,{className:"mr-2 h-5 w-5"}),"General"]}),(0,r.jsxs)("button",{onClick:()=>o("export"),className:"group inline-flex items-center py-2 px-1 border-b-2 font-medium text-sm ".concat("export"===d?"border-company-navy text-company-navy":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)(h,{className:"mr-2 h-5 w-5"}),"Data Export"]})]})}),"general"===d&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"card-header",children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Company Information"})}),(0,r.jsx)("div",{className:"card-body space-y-4",children:(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"EPI-USE South Africa"}),(0,r.jsxs)("div",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Currency:"})," South African Rand (ZAR)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Timezone:"})," Africa/Johannesburg (SAST)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Language:"})," English (South Africa)"]})]}),(0,r.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"Company details are managed by system administrators and cannot be modified."})]})})})})]})}),"export"===d&&(0,r.jsx)(j,{user:e})]})})]}):null}}},function(e){e.O(0,[66,814,134,666,393,888,774,179],function(){return e(e.s=2837)}),_N_E=e.O()}]);