(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{1756:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/employees",function(){return a(2531)}])},3813:function(e,s,a){"use strict";a.d(s,{hM:function(){return r},kD:function(){return n},s4:function(){return i}});var t=a(5893);a(7294);let l=()=>(0,t.jsxs)("tr",{className:"animate-pulse",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-10 w-10 bg-gray-200 rounded-full"})}),(0,t.jsxs)("div",{className:"ml-4 space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-28"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,t.jsx)("div",{className:"h-5 w-5 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-5 w-5 bg-gray-200 rounded"})]})})]}),r=e=>{let{rows:s=5}=e;return(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,t.jsx)("th",{className:"relative px-6 py-3",children:(0,t.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:s}).map((e,s)=>(0,t.jsx)(l,{},s))})]})})})},i=()=>(0,t.jsx)("div",{className:"card animate-pulse",children:(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-16"})]}),(0,t.jsx)("div",{className:"h-12 w-12 bg-gray-200 rounded-lg"})]})})}),n=()=>(0,t.jsx)("div",{className:"card animate-pulse",children:(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)("div",{className:"h-10 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})})})},2531:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return M}});var t=a(5893),l=a(7294),r=a(9008),i=a.n(r),n=a(1163),d=a(2637),c=a(7536),m=a(7533),o=a(6310),x=a(6501);let p=l.forwardRef(function(e,s){let{title:a,titleId:t,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),a?l.createElement("title",{id:t},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});var u=a(3069),h=a(1594),y=a(2121),v=a(3813),N=a(9844);let j=l.forwardRef(function(e,s){let{title:a,titleId:t,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),a?l.createElement("title",{id:t},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});var g=a(3903),f=a(7489);let b=e=>{let{employee:s,user:a,permissions:l,onEdit:r,onDelete:i,canViewEmployeeSalary:n,formatDepartmentName:d,index:c}=e;return(0,t.jsxs)("div",{className:"flex items-center border-b border-gray-200 hover:bg-gray-50 px-6 py-4 ".concat(c%2==0?"bg-white":"bg-gray-50"),style:{height:"80px"},children:[(0,t.jsxs)("div",{className:"flex-1 flex items-center min-w-0",children:[(0,t.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,t.jsx)(f.Z,{user:{email:s.email,employee:s},size:40,className:"h-10 w-10 rounded-full object-cover",alt:"".concat(s.firstName," ").concat(s.lastName)})}),(0,t.jsxs)("div",{className:"ml-4 min-w-0",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-900 truncate",children:[s.firstName," ",s.lastName]}),(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate",children:s.email}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["#",s.employeeNumber]})]})]}),(0,t.jsx)("div",{className:"flex-1 px-6",children:(0,t.jsx)("div",{className:"text-sm text-gray-900 truncate",children:s.position})}),(0,t.jsx)("div",{className:"flex-1 px-6",children:(0,t.jsx)("div",{className:"text-sm text-gray-900 truncate capitalize",children:d(s.department||"")})}),l.canViewSalaries&&(0,t.jsx)("div",{className:"flex-1 px-6",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:n(s)?(0,N.xG)(s.salary):"•••••••"})}),(0,t.jsx)("div",{className:"flex-1 px-6",children:s.manager?(0,t.jsxs)("div",{className:"text-sm text-gray-900 truncate",children:[s.manager.firstName," ",s.manager.lastName]}):(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"No manager"})}),(0,t.jsx)("div",{className:"flex-1 px-6",children:(0,t.jsx)("div",{className:"text-sm text-gray-500",children:(0,N.p6)(s.createdAt)})}),(0,t.jsxs)("div",{className:"flex-shrink-0 flex items-center space-x-2 px-6",children:[l.canEditEmployees&&(0,t.jsx)("button",{onClick:()=>r(s),className:"text-company-navy hover:text-company-navy-dark",title:"Edit Employee",children:(0,t.jsx)(j,{className:"h-5 w-5"})}),l.canDeleteEmployees&&(0,t.jsx)("button",{onClick:()=>i(s.id),className:"text-red-600 hover:text-red-900",title:"Delete Employee",children:(0,t.jsx)(g.Z,{className:"h-5 w-5"})}),!l.canEditEmployees&&!l.canDeleteEmployees&&(0,t.jsx)("span",{className:"text-gray-400 text-xs",children:"View Only"})]})]})},w=e=>{let{employees:s,user:a,onEdit:l,onDelete:r,height:i=600,hasMore:n,isLoadingMore:d,loadMore:c}=e,m=(0,y.$)((null==a?void 0:a.role)||"EMPLOYEE"),o=e=>e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),x=e=>{if(!m.canViewSalaries)return!1;if((null==a?void 0:a.role)==="ADMIN")return!0;if((null==a?void 0:a.role)==="MANAGER"){var s,t;if(e.id===(null===(s=a.employee)||void 0===s?void 0:s.id))return!0;let l=(e,s)=>!!e.manager&&(e.manager.id===s||l(e.manager,s));return null!==(t=a.employee)&&void 0!==t&&!!t.id&&l(e,a.employee.id)}return!1};return 0===s.length?(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-body text-center py-12",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("div",{className:"text-xl font-medium mb-2",children:"No employees found"}),(0,t.jsx)("div",{className:"text-sm",children:"Try adjusting your search criteria"})]})})}):(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,t.jsx)("div",{className:"flex-1",children:"Employee"}),(0,t.jsx)("div",{className:"flex-1 px-6",children:"Position"}),(0,t.jsx)("div",{className:"flex-1 px-6",children:"Department"}),m.canViewSalaries&&(0,t.jsx)("div",{className:"flex-1 px-6",children:"Salary"}),(0,t.jsx)("div",{className:"flex-1 px-6",children:"Manager"}),(0,t.jsx)("div",{className:"flex-1 px-6",children:"Joined"}),(0,t.jsx)("div",{className:"flex-shrink-0 px-6",children:"Actions"})]})}),(0,t.jsxs)("div",{style:{height:i,overflow:"auto"},className:"divide-y divide-gray-200",onScroll:e=>{let s=e.currentTarget;s.scrollTop+s.clientHeight>=s.scrollHeight-200&&n&&!d&&c&&c()},children:[s.map((e,s)=>(0,t.jsx)(b,{employee:e,user:a,permissions:m,onEdit:l,onDelete:r,canViewEmployeeSalary:x,formatDepartmentName:o,index:s},e.id)),n&&(0,t.jsx)("div",{className:"px-6 py-4 text-center text-gray-500",children:(0,t.jsx)("div",{className:"text-sm",children:d?"Loading more…":"Scroll to load more"})})]})]})};var E=a(2967);let k=o.Ry({firstName:o.Z_().required("First name is required"),lastName:o.Z_().required("Last name is required"),email:o.Z_().email("Invalid email").required("Email is required"),employeeNumber:o.Z_().required("Employee number is required"),position:o.Z_().required("Position is required"),department:o.Z_().required("Department is required"),salary:o.Rx().positive("Salary must be positive").required("Salary is required"),birthDate:o.Z_().required("Birth date is required"),managerId:o.Z_().optional()});function A(e){var s,a,r,i,n,d;let{user:o}=e,[N,j]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[b,A]=(0,l.useState)(""),[M,S]=(0,l.useState)(""),[D,P]=(0,l.useState)("firstName"),[Z,R]=(0,l.useState)("asc"),[C,I]=(0,l.useState)(!1),[L,_]=(0,l.useState)(!1),[G,q]=(0,l.useState)(null),O=(0,E.UE)(),[T,V]=(0,l.useState)({}),F=()=>{V({name:N||void 0,employeeNumber:g||void 0,position:b||void 0,department:M||void 0})};(0,l.useEffect)(()=>{(null==o?void 0:o.role)!=="ADMIN"&&M&&S("")},[null==o?void 0:o.role,M]);let B=(0,y.$)((null==o?void 0:o.role)||"EMPLOYEE"),{register:H,handleSubmit:U,reset:Y,setValue:z,formState:{errors:W,isSubmitting:X}}=(0,c.cI)({resolver:(0,m.X)(k),defaultValues:{department:(null==o?void 0:o.role)==="MANAGER"?null===(s=o.employee)||void 0===s?void 0:s.department:"",managerId:(null==o?void 0:o.role)==="MANAGER"?null===(a=o.employee)||void 0===a?void 0:a.id:""}}),{register:J,handleSubmit:K,reset:$,setValue:Q,formState:{errors:ee,isSubmitting:es}}=(0,c.cI)({resolver:(0,m.X)(k)}),{data:ea,isLoading:et,error:el,fetchNextPage:er,hasNextPage:ei,isFetchingNextPage:en}=(0,E.$I)({limit:50,...T,sortBy:D,sortOrder:Z}),{data:ed,isLoading:ec}=(0,E.QH)(),em=(0,E.fm)(),eo=(0,E.A4)(),ex=(0,E.jO)(),ep=((null==ea?void 0:ea.pages)||[]).flatMap(e=>e.employees||[]).filter(e=>{var s;return((null==o?void 0:o.role)!=="MANAGER"||(null==o?void 0:null===(s=o.employee)||void 0===s?void 0:s.id)!==e.id)&&((null==o?void 0:o.role)!=="EMPLOYEE"&&(null==o?void 0:o.role)!=="MANAGER"||!!e.managerId)}),eu=async e=>{var s,a,t,l;try{let t={...e};(null==o?void 0:o.role)==="MANAGER"&&o.employee&&(t.department=o.employee.department,t.managerId=o.employee.id),await em.mutateAsync(t),x.ZP.success("Employee added successfully!"),I(!1),Y({department:(null==o?void 0:o.role)==="MANAGER"?null===(s=o.employee)||void 0===s?void 0:s.department:"",managerId:(null==o?void 0:o.role)==="MANAGER"?null===(a=o.employee)||void 0===a?void 0:a.id:""})}catch(e){x.ZP.error((null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.error)||"Failed to add employee")}},eh=async e=>{if(G)try{await eo.mutateAsync({...e,id:G.id}),x.ZP.success("Employee updated successfully!"),_(!1),q(null),$()}catch(e){var s,a;x.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)||"Failed to update employee")}},ey=B.canCreateEmployees,ev=B.canEditEmployees,eN=B.canDeleteEmployees;B.canViewEmployees;let ej=async e=>{if(!eN){x.ZP.error("You do not have permission to delete employees.");return}if(window.confirm("Are you sure you want to delete this employee?"))try{await ex.mutateAsync(e),x.ZP.success("Employee deleted successfully!")}catch(e){var s,a;x.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)||"Failed to delete employee")}};return et?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:(null==o?void 0:o.role)==="ADMIN"?"Employees":"TeamSpace"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Loading employee data..."})]})}),(0,t.jsx)(v.kD,{}),(0,t.jsx)(v.hM,{rows:8})]}):el?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-body text-center py-12",children:(0,t.jsxs)("div",{className:"text-red-500",children:[(0,t.jsx)("div",{className:"text-xl font-medium mb-2",children:"Error loading employees"}),(0,t.jsx)("div",{className:"text-sm",children:"Please try refreshing the page"})]})})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:(null==o?void 0:o.role)==="ADMIN"?"Employees":"TeamSpace"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(null==o?void 0:o.role)==="ADMIN"&&"Full administrative access: Create, view, edit, and delete all employees",(null==o?void 0:o.role)==="MANAGER"&&"Team management: View and edit your team members",(null==o?void 0:o.role)==="EMPLOYEE"&&"Team directory: Connect with your colleagues and team members"]})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:ey&&(0,t.jsxs)("button",{onClick:()=>I(!0),className:"btn-primary inline-flex items-center space-x-2",children:[(0,t.jsx)(p,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Add Employee"})]})})]}),(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"})}),(0,t.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:N,onChange:e=>j(e.target.value),onKeyDown:e=>"Enter"===e.key&&F(),className:"input-field pl-10"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"text",placeholder:"Employee Number",value:g,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&F(),className:"input-field"})}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"text",placeholder:"Position",value:b,onChange:e=>A(e.target.value),onKeyDown:e=>"Enter"===e.key&&F(),className:"input-field"})}),(null==o?void 0:o.role)==="ADMIN"&&(0,t.jsx)("div",{children:(0,t.jsxs)("select",{value:M,onChange:e=>S(e.target.value),className:"input-field",children:[(0,t.jsx)("option",{value:"",children:"All Departments"}),(0,t.jsx)("option",{value:"management",children:"Management"}),(0,t.jsx)("option",{value:"technology",children:"Technology"}),(0,t.jsx)("option",{value:"human-resources",children:"Human Resources"}),(0,t.jsx)("option",{value:"sales",children:"Sales"}),(0,t.jsx)("option",{value:"marketing",children:"Marketing"})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("button",{onClick:F,className:"btn-primary inline-flex items-center justify-center space-x-2",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Search"})]}),(0,t.jsxs)("button",{onClick:()=>{j(""),f(""),A(""),S(""),V({})},className:"btn-secondary inline-flex items-center justify-center space-x-2",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Clear"})]})]})]})}),(0,t.jsx)(w,{employees:ep,user:o,onEdit:e=>{if(!ev){x.ZP.error("You do not have permission to edit employees.");return}O(e.id),q(e),_(!0),Q("firstName",e.firstName),Q("lastName",e.lastName),Q("email",e.email||""),Q("employeeNumber",e.employeeNumber),Q("position",e.position),Q("department",e.department||""),Q("salary",e.salary),Q("birthDate",e.birthDate?new Date(e.birthDate).toISOString().split("T")[0]:""),Q("managerId",e.managerId||"")},onDelete:ej,height:600,hasMore:!!ei,isLoadingMore:!!en,loadMore:()=>{ei&&!en&&er()}}),C&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"relative mx-auto p-6 border max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-lg rounded-lg bg-white",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Employee"}),(0,t.jsx)("button",{onClick:()=>{var e,s;I(!1),Y({department:(null==o?void 0:o.role)==="MANAGER"?null===(e=o.employee)||void 0===e?void 0:e.department:"",managerId:(null==o?void 0:o.role)==="MANAGER"?null===(s=o.employee)||void 0===s?void 0:s.id:""})},className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(h.Z,{className:"h-6 w-6"})})]}),(0,t.jsxs)("form",{onSubmit:U(eu),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,t.jsx)("input",{...H("firstName"),type:"text",className:"input-field ".concat(W.firstName?"border-red-300":""),placeholder:"Enter first name"}),W.firstName&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.firstName.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,t.jsx)("input",{...H("lastName"),type:"text",className:"input-field ".concat(W.lastName?"border-red-300":""),placeholder:"Enter last name"}),W.lastName&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.lastName.message})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,t.jsx)("input",{...H("email"),type:"email",className:"input-field ".concat(W.email?"border-red-300":""),placeholder:"Enter email address"}),W.email&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Number"}),(0,t.jsx)("input",{...H("employeeNumber"),type:"text",className:"input-field ".concat(W.employeeNumber?"border-red-300":""),placeholder:"e.g., EMP-021"}),W.employeeNumber&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.employeeNumber.message})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),(0,t.jsx)("input",{...H("position"),type:"text",className:"input-field ".concat(W.position?"border-red-300":""),placeholder:"Enter job position"}),W.position&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.position.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Department",(null==o?void 0:o.role)==="MANAGER"&&(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"(Auto-assigned to your department)"})]}),(0,t.jsxs)("select",{...H("department"),className:"input-field ".concat(W.department?"border-red-300":""),disabled:(null==o?void 0:o.role)==="MANAGER",value:(null==o?void 0:o.role)==="MANAGER"?null===(r=o.employee)||void 0===r?void 0:r.department:void 0,children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),(0,t.jsx)("option",{value:"management",children:"Management"}),(0,t.jsx)("option",{value:"technology",children:"Technology"}),(0,t.jsx)("option",{value:"human-resources",children:"Human Resources"}),(0,t.jsx)("option",{value:"sales",children:"Sales"}),(0,t.jsx)("option",{value:"marketing",children:"Marketing"})]}),W.department&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.department.message})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.canViewSalaries&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary (ZAR)"}),(0,t.jsx)("input",{...H("salary"),type:"number",min:"0",step:"1000",className:"input-field ".concat(W.salary?"border-red-300":""),placeholder:"Enter annual salary"}),W.salary&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.salary.message})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Date"}),(0,t.jsx)("input",{...H("birthDate"),type:"date",className:"input-field ".concat(W.birthDate?"border-red-300":"")}),W.birthDate&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:W.birthDate.message})]})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Manager ",(null==o?void 0:o.role)==="ADMIN"?"(Optional)":"",(null==o?void 0:o.role)==="MANAGER"&&(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"(Auto-assigned to you)"})]}),(0,t.jsxs)("select",{...H("managerId"),className:"input-field",disabled:(null==o?void 0:o.role)==="MANAGER",value:(null==o?void 0:o.role)==="MANAGER"?null===(i=o.employee)||void 0===i?void 0:i.id:void 0,children:[(0,t.jsx)("option",{value:"",children:"Select a manager"}),null==ed?void 0:null===(n=ed.employees)||void 0===n?void 0:n.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," - ",e.position]},e.id))]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{I(!1),Y()},className:"btn-outline",disabled:X,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:em.isPending,children:em.isPending?"Adding...":"Add Employee"})]})]})]})}),L&&G&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"relative mx-auto p-6 border max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-lg rounded-lg bg-white",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Employee"}),(0,t.jsx)("button",{onClick:()=>{_(!1),q(null),$()},className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(h.Z,{className:"h-6 w-6"})})]}),(0,t.jsxs)("form",{onSubmit:K(eh),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,t.jsx)("input",{...J("firstName"),type:"text",className:"input-field ".concat(ee.firstName?"border-red-300":""),placeholder:"Enter first name"}),ee.firstName&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.firstName.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,t.jsx)("input",{...J("lastName"),type:"text",className:"input-field ".concat(ee.lastName?"border-red-300":""),placeholder:"Enter last name"}),ee.lastName&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.lastName.message})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,t.jsx)("input",{...J("email"),type:"email",className:"input-field ".concat(ee.email?"border-red-300":""),placeholder:"Enter email address"}),ee.email&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.email.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Number"}),(0,t.jsx)("input",{...J("employeeNumber"),type:"text",className:"input-field ".concat(ee.employeeNumber?"border-red-300":""),placeholder:"Enter employee number"}),ee.employeeNumber&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.employeeNumber.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),(0,t.jsx)("input",{...J("position"),type:"text",className:"input-field ".concat(ee.position?"border-red-300":""),placeholder:"Enter position"}),ee.position&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.position.message})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,t.jsxs)("select",{...J("department"),className:"input-field ".concat(ee.department?"border-red-300":""),children:[(0,t.jsx)("option",{value:"",children:"Select Department"}),(0,t.jsx)("option",{value:"management",children:"Management"}),(0,t.jsx)("option",{value:"technology",children:"Technology"}),(0,t.jsx)("option",{value:"human-resources",children:"Human Resources"}),(0,t.jsx)("option",{value:"sales",children:"Sales"}),(0,t.jsx)("option",{value:"marketing",children:"Marketing"})]}),ee.department&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.department.message})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salary"}),(0,t.jsx)("input",{...J("salary"),type:"number",step:"0.01",className:"input-field ".concat(ee.salary?"border-red-300":""),placeholder:"Enter salary"}),ee.salary&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.salary.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Date"}),(0,t.jsx)("input",{...J("birthDate"),type:"date",className:"input-field ".concat(ee.birthDate?"border-red-300":"")}),ee.birthDate&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ee.birthDate.message})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager (Optional)"}),(0,t.jsxs)("select",{...J("managerId"),className:"input-field",children:[(0,t.jsx)("option",{value:"",children:"Select a manager"}),null==ed?void 0:null===(d=ed.employees)||void 0===d?void 0:d.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," - ",e.position]},e.id))]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{_(!1),q(null),$()},className:"btn-outline",disabled:es,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:eo.isPending,children:eo.isPending?"Updating...":"Update Employee"})]})]})]})})]})}function M(){let[e,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(!0),c=(0,n.useRouter)();return((0,l.useEffect)(()=>{let e=localStorage.getItem("auth_token"),a=localStorage.getItem("user");if(!e||!a){c.push("/auth/login");return}try{let e=JSON.parse(a);s(e)}catch(e){console.error("Error parsing user data:",e),c.push("/auth/login")}finally{r(!1)}},[c]),(0,l.useEffect)(()=>{let e=e=>{s(e.detail)};return window.addEventListener("userProfileUpdated",e),()=>{window.removeEventListener("userProfileUpdated",e)}},[]),a)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-company-navy"})}):e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i(),{children:[(0,t.jsxs)("title",{children:["ADMIN"===e.role?"Employees":"TeamSpace"," - EPI-USE Nexus"]}),(0,t.jsx)("meta",{name:"description",content:"ADMIN"===e.role?"Manage your employees":"Connect with your team members and colleagues"})]}),(0,t.jsx)(d.Z,{user:e,children:(0,t.jsx)(A,{user:e})})]}):null}},3069:function(e,s,a){"use strict";var t=a(7294);let l=t.forwardRef(function(e,s){let{title:a,titleId:l,...r}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},r),a?t.createElement("title",{id:l},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});s.Z=l},3903:function(e,s,a){"use strict";var t=a(7294);let l=t.forwardRef(function(e,s){let{title:a,titleId:l,...r}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},r),a?t.createElement("title",{id:l},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});s.Z=l}},function(e){e.O(0,[66,814,134,666,216,393,888,774,179],function(){return e(e.s=1756)}),_N_E=e.O()}]);